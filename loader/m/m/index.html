<!DOCTYPE html>
<html style="width:100%;height:100%;background-color:black;">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0">
    <title>EaglerCraft Recode</title>
   
    <script type="text/javascript">
      window.addEventListener("load", function() {
        if ((typeof WebAssembly !== "undefined") && (typeof WebAssembly.Suspending !== "undefined")) {
          try {
            if ("true" === window.localStorage.getItem("hideEaglerWASMAvailable")) {
              return;
            }
          } catch (ex) {}
          var el = document.getElementById("eaglerWASMAvailable");
          var chkbox = document.getElementById("eaglerWASMAvailableDontShow");

          function handleDontShow() {
            if (chkbox.checked) {
              try {
                window.localStorage.setItem("hideEaglerWASMAvailable", "true");
              } catch (ex) {}
            }
          }
          el.style.display = "block";
          document.getElementById("eaglerWASMAvailableYes").addEventListener("click", function() {
            handleDontShow();
            document.location.href = "./wasm/index.html";
          });
          document.getElementById("eaglerWASMAvailableNo").addEventListener("click", function() {
            handleDontShow();
            el.style.display = "none";
          });
        }
      });
    </script>
    <script type="text/javascript">
      window.disableUserscripts = true;
      window.__eaglercraftLoaderClient = {
        container: "game_frame",
        name: "EaglerCraft Recode",
        file: "net.lax1dude.eaglercraft.v1_8.client",
        cid: "bafybeicvtan5bk6j2lnu6gopujqx36diqfhv6ipamc4hqbvx5mkpl6jmf4",
        path: "",
        dlSize: 13520353,
        gzip: true
      };
    </script>
    <script type="text/javascript" src="js/loader.js"></script>
    <link type="image/png" rel="shortcut icon" href="img/game.png">
  </head>
  <body style="margin:0px;width:100%;height:100%;overflow:hidden;background-color:white;">
    <div id="eaglerWASMAvailable" style="display:none;position:absolute;left:0px;top:0px;right:0px;z-index:1000;">
      <div style="margin:auto;max-width:650px;">
        <div style="margin:20px;border:5px double black;padding:10px;background-color:white;text-align:center;font-family:sans-serif;font-size:1.2em;">
          <h3>ВебАссембли доступен, запускаем?</h3>
          <p>новая версия EaglerCraft делает <b>2x FPS</b>, ну если че крашнется я не виноват </p>
          <p>ну и ваши миры сохранятся</p>
          <h4>
            <input type="checkbox" style="zoom:1.5;" id="eaglerWASMAvailableDontShow"> не показывать снова
          </h4>
          <p>
            <button id="eaglerWASMAvailableYes" style="zoom:1.5;">погнали</button>
          </p>
          <p>
            <button id="eaglerWASMAvailableNo" style="zoom:1.5;">js лучше</button>
          </p>
        </div>
      </div>
    </div>
    <div id="game_frame" style="width:100%;height:100%;"></div>
    <!-- PWA Meta Tags -->
<link rel="manifest" href="/manifest.json">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="application-name" content="EaglerCraft">
<meta name="apple-mobile-web-app-title" content="EaglerCraft">
<meta name="theme-color" content="#16213e">

<!-- Register Service Worker -->
<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/sw.js')
      .then(registration => console.log('SW registered:', registration))
      .catch(error => console.log('SW registration failed:', error));
  });
}
</script>
  </body>
</html>